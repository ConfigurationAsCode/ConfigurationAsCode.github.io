<!DOCTYPE html>
<html>
<head>
    
    <title>Autamatization of processes to build and release software for complex software products by using cloud systems</title>
    <meta charset="utf-8" />


    <link href="css/simple.css" rel="stylesheet" type="text/css" />
    <link href="css/highlight.css" rel="stylesheet" type="text/css" />

    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script src="js/jmpress.js"></script>
    <script src="js/jmpress_init.js"></script>

</head>
<body>
<div id="jmpress">
    <div class="title step" data-scale="1" data-x="0" data-y="0" data-z="1000" id="title">
        <header>
            <h1>From pets versus cattle To configuration as code</h1>
        </header>
        <section>Moving the build-system used at citrix-online to the cloud</section>
    </div>
    <div class="slide step" id="goals" data-scale="1" data-x="1200" data-y="0" data-z="1000">
        <header>
            <h1>Agenda</h1>
        </header>
        <section>
            <ul>
                <li>Who am I</li>
                <li>
                    <dl>
                        <dt>Citrix / Citrix Online</dt>
                        <dd>
                            <ul>
                                <li>What is my job there</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>Where did we start a year ago</dt>
                        <dd>
                            <ul>
                                <li>30000 foot view of infrastructure</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>New Approach</dt>
                        <dd>
                            <ul>
                                <li>Secure Build Environment</li>
                                <li>Infrastructure as code</li>
                                <li>Configuration as code</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="me" data-scale="1" data-x="2400" data-y="0" data-z="1000">
        <header>
            <h1>Who Am I</h1>
        </header>
        <section>
            <p>Name: Thomas William</p>
            <p>EMail: thomas[dot]william[at]citrix[dot]com</p>
            <table>
                <tbody>
                    <tr>
                        <td>1992-1999</td>
                        <td>Grammar school</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>Gymnasium Coswig</td>
                    </tr>
                    <tr>
                        <td>2000-2007</td>
                        <td>Diploma student in computer science</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>TU Dresden</td>
                    </tr>
                    <tr>
                        <td>2007-2015</td>
                        <td>Software/Performance Analyst</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>GWT-TUD GmbH</td>
                    </tr>
                    <tr>
                        <td>2015-</td>
                        <td>Build Tools Engineer at Citrix Online</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>Citrix Systems</td>
                    </tr>
                </tbody>
            </table>
        </section>
    </div>
    <div class="slide step" id="mytopics" data-scale="1" data-x="3600" data-y="0" data-z="1000">
        <header>
            <h1>Prior Field Of Work</h1>
        </header>
        <section>
            <ul>
                <li>Product manager for the performance analysis software Vampir</li>
                <li>Performance analysis for the Indiana University</li>
                <li>Principal investigator in a joint NIH-funded project <em>Trinity: Transcriptome assembly for genetic and functional analysis of cancer</em> with the Broad Institute</li>
                <li>Lectures on <em>Linux Cluster in Theorie und Praxis</em> at the computer architectures chair at TU-Dresden</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="citrix" data-scale="1" data-x="4800" data-y="0" data-z="1000">
        <header>
            <h1>Citrix Systems, Inc.</h1>
        </header>
        <section>
            <img align="right" alt="Citrix Logo" height="100px" src="img/CitrixLogoBlack.png" />
            <ul>
                <li>Founded 1989</li>
                <li>Around 10k employees</li>
                <li>~3 billion USD Revenue</li>
                <li>
                    <dl>
                        <dt>Products:</dt>
                        <dd>
                            <ul>
                                <li>Desktops and apps (see next slide)</li>
                                <li>Desktop as a Service (DaaS)</li>
                                <li>Software as a Service (SaaS)</li>
                                <li>Networking (Netscaler) and cloud</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>Citrix gave:</dt>
                        <dd>
                            <ul>
                                <li>Cloudstack to the Apache Foundation</li>
                                <li>Xen hypervisor to the Linux Foundation</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="citrix-apps" data-scale="1" data-x="6000" data-y="0" data-z="1000">
        <header>
            <h1>Desktops and apps</h1>
        </header>
        <section>
            <img align="center" alt="Citrix Apps Logos" height="400px" src="img/CitrixLogos.png" />
        </section>
    </div>
    <div class="slide step" id="dresden" data-scale="1" data-x="7200" data-y="0" data-z="1000">
        <header>
            <h1>RTC Platform Dresden</h1>
        </header>
        <section>
            <ul>
                <li>50+ people</li>
                <li>2 groups</li>
                <li>
                    <dl>
                        <dt>RTC Platform Dresden Group</dt>
                        <dd>
                            <ul>
                                <li>RTC Endpoint Platform Team</li>
                                <li>RTC Server Platform Team</li>
                                <li>RTC Platform Shared Services Team</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>Media Signal Processing Group</dt>
                        <dd>
                            <ul>
                                <li>Video Processing Team</li>
                                <li>Audio Signal Processing Team</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="step" id="dresden-team" data-scale="1" data-x="8400" data-y="0" data-z="1000">
        <header>
            <h1>Dresden Team Foto</h1>
        </header>
        <section>
            <img align="right" alt="Dresden Team" height="600px" src="img/DresdenTeam.jpg" />
        </section>
    </div>
    <div class="slide step" id="my-job" data-scale="1" data-x="0" data-y="800" data-z="1000">
        <header>
            <h1>My Job At Citrix</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt>I'm part of the build tools management team (BTM)</dt>
                        <dd>
                            <ul>
                                <li>2 Ger, 3 (India), 6 (USA)</li>
                                <li>1 Director, 1 Architect, 1 Manager</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>We support Building, Packaging and Deploying</dt>
                        <dd>
                            <ul>
                                <li>Developer Application Management</li>
                                <li>System / Infrastructure Administration</li>
                                <li>Developer Support Tools</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="status" data-scale="1" data-x="1200" data-y="800" data-z="1000">
        <header>
            <h1>Status March 2015</h1>
        </header>
        <section>
            <ul>
                <li>3 different build and deploy systems</li>
                <li>3 different SCM systems</li>
                <li>4++ different code quality and code coverage systems</li>
                <li>Multiple different packaging and deployment workflows</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="application-management" data-scale="1" data-x="2400" data-y="800" data-z="1000">
        <header>
            <h1>Application Management</h1>
        </header>
        <section>
            <ul>
                <li>Bamboo (build &amp; deploy)</li>
                <li>BuildForge (build &amp; deploy)</li>
                <li>Jenkins (build &amp; deploy)</li>
                <li>Artifactory (artifact store)</li>
                <li>Clover (code coverage)</li>
                <li>Confluence (wiki)</li>
                <li>Crowd (user mgmt)</li>
                <li>Crucible and FishEye (code review)</li>
                <li>JIRA (ticket/project mgmt)</li>
                <li>Stash (SCM)</li>
                <li>Perforce (SCM)</li>
                <li>Sonar (source quality mgmt)</li>
                <li>Splunk (logs)</li>
                <li>Zenoss (monitoring)</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="system-infrastructure-administration" data-scale="1" data-x="3600" data-y="800" data-z="1000">
        <header>
            <h1>System / Infrastructure Administration</h1>
        </header>
        <section>
            <ul>
                <li>CloudStack</li>
                <li>Windows/Unix/Mac build machines</li>
                <li>Application servers</li>
                <li>User management for the applications</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="other-tools" data-scale="1" data-x="4800" data-y="800" data-z="1000">
        <header>
            <h1>Other Tools</h1>
        </header>
        <section>
            <ul>
                <li>BOM tool</li>
                <li>Build Dependency Tool</li>
                <li>uDeploy</li>
                <li>Electric Cloud</li>
                <li>PostgreSQL</li>
                <li>Signing Module</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="machines1" data-scale="1" data-x="6000" data-y="800" data-z="1000">
        <header>
            <h1>Machines Managed Manually 1/2</h1>
        </header>
        <section>
            <img align="center" alt="Wiki-page for machine info" height="500px" src="img/MachineInfo.png" />
        </section>
    </div>
    <div class="slide step" id="machines2" data-scale="1" data-x="7200" data-y="800" data-z="1000">
        <header>
            <h1>Machines Managed Manually 2/2</h1>
        </header>
        <section>
            <ul>
                <li>Machines managed manually with ssh/scripts/build-plans</li>
                <li>Configurations differ between machines</li>
                <li>Buildplans therefor have to be tied to certain machines</li>
                <li>No equal load distribution</li>
                <li>Crash of single machine may block a plan/team</li>
            </ul>
            <p>-&gt; "Pets vs. Cattle"</p>
        </section>
    </div>
    <div class="slide step" id="example-workflow" data-scale="1" data-x="8400" data-y="800" data-z="1000">
        <header>
            <h1>Example Workflow</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt>Bamboo plan to build binaries from sources</dt>
                        <dd>
                            <ul>
                                <li>Creates RPMs, stores them in NFS share</li>
                                <li>Triggers child plans</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>Bamboo childplan using bash scripts to:</dt>
                        <dd>
                            <ul>
                                <li>Upload rpms to Artifactory</li>
                                <li>Trigger docker container creation in Jenkins</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>Jenkins plan that builds docker containers</dt>
                        <dd>
                            <ul>
                                <li>Containers are stored in Artifactory</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>Bamboo childplan for end2end tests in test environment using Cucumber</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="RTCGW-Bamboo1" data-scale="1" data-x="0" data-y="1600" data-z="1000">
        <header>
            <h1>Bamboo Plan: RTCGW RPM Build</h1>
        </header>
        <section>
            <img align="center" alt="Gateway Project Plan" height="450px" src="img/Gateway-Bamboo.png" />
        </section>
    </div>
    <div class="slide step" id="RTCGW-Bamboo1a" data-scale="1" data-x="1200" data-y="1600" data-z="1000">
        <header>
            <h1>Bamboo Plan Configuration</h1>
        </header>
        <section>
            <img align="center" alt="Gateway Project Plan Configuration" height="450px" src="img/Gateway-Bamboo-Config.png" />
        </section>
    </div>
    <div class="slide step" id="RTCGW-Bamboo1b" data-scale="1" data-x="2400" data-y="1600" data-z="1000">
        <header>
            <h1>Bamboo Child Plans</h1>
        </header>
        <section>
            <img align="center" alt="Child Plans" height="430px" src="img/Gateway-Bamboo-Childs.png" />
        </section>
    </div>
    <div class="slide step" id="RTCGW-Bamboo2" data-scale="1" data-x="3600" data-y="1600" data-z="1000">
        <header>
            <h1>Bamboo Plan: RTCGW RPM Upload</h1>
        </header>
        <section>
            <img align="center" alt="Upload and Container trigger plan" height="450px" src="img/Gateway-Bamboo-Docker.png" />
        </section>
    </div>
    <div class="slide step" id="RTCGW-Artifactory" data-scale="1" data-x="4800" data-y="1600" data-z="1000">
        <header>
            <h1>Artifact Store For RPMs</h1>
        </header>
        <section>
            <img align="center" alt="Artifactory" height="450px" src="img/Gateway-Artifactory-RPMs.png" />
        </section>
    </div>
    <div class="slide step" id="RTCGW-Jenkins1" data-scale="1" data-x="6000" data-y="1600" data-z="1000">
        <header>
            <h1>Jenkins Plan: RTCGW Container</h1>
        </header>
        <section>
            <img align="center" alt="Docker Container Creation" height="450px" src="img/Gateway-Jenkins-Container.png" />
        </section>
    </div>
    <div class="slide step" id="RTCGW-Bamboo3" data-scale="1" data-x="7200" data-y="1600" data-z="1000">
        <header>
            <h1>Bamboo Plan: RTCGW Testdeploy</h1>
        </header>
        <section>
            <img align="center" alt="PlaceHolder" height="450px" src="img/Gateway-Bamboo-Deploy.png" />
        </section>
    </div>
    <div class="slide step" id="the-new-approach" data-scale="1" data-x="8400" data-y="1600" data-z="1000">
        <header>
            <h1>The New Approach</h1>
        </header>
        <section>
            <ul>
                <li>In 2014, evaluation and decision to reboot build infrastructure</li>
                <li>A New Director and Principle Architect were hired</li>
                <li>Move everything to the cloud (AWS for now)</li>
                <li>Consolidate tools zoo</li>
                <li>Identify common workflow patterns</li>
                <li>Only common patterns will get official support</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="longterm-goals" data-scale="1" data-x="0" data-y="2400" data-z="1000">
        <header>
            <h1>Longterm Goals</h1>
        </header>
        <section>
            <ul>
                <li>Developer's hands to Customer's hands in (less than) 1 hour</li>
                <li>A new Developer can produce Customer value in (less than) 24 hours</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="what-is-the-sbe-in-aws" data-scale="1" data-x="1200" data-y="2400" data-z="1000">
        <header>
            <h1>What Is The SBE In AWS?</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt><strong>SBE</strong>: Secure Build Environment</dt>
                        <dd>The new build environment currently in development</dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt><strong>AWS</strong>: Amazon Web Services</dt>
                        <dd>Instead of in-house servers we now use Amazons EC2 instances to be scalable</dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt><strong>EC2</strong>: Amazon Elastic Compute Cloud</dt>
                        <dd>Part of cloud-computing platform AWS, for <a href="http://www.ec2instances.info/">renting</a> virtual computers</dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="SBE-Overview" data-scale="1" data-x="2400" data-y="2400" data-z="1000">
        <header>
            <h1>SBE Overview</h1>
        </header>
        <section>
            <img align="center" alt="SBE Overview" height="500px" src="img/SBE-Overview.png" />
        </section>
    </div>
    <div class="slide step" id="SBE-Production" data-scale="1" data-x="3600" data-y="2400" data-z="1000">
        <header>
            <h1>SBE Production</h1>
        </header>
        <section>
            <img align="center" alt="SBE Production" height="500px" src="img/SBE-Production.png" />
        </section>
    </div>
    <div class="slide step" id="infrastructure-as-code-iac" data-scale="1" data-x="4800" data-y="2400" data-z="1000">
        <header>
            <h1>Infrastructure As Code (IAC)</h1>
        </header>
        <section>
            <dl>
                <dt><strong>Definition:</strong></dt>
                <dd>Infrastructure as Code (IAC) is a type of IT infrastructure that operations teams can automatically manage and provision through code, rather than using a manual process. Infrastructure as Code is sometimes referred to as programmable infrastructure.</dd>
            </dl>
        </section>
    </div>
    <div class="slide step" data-scale="1" data-x="6000" data-y="2400" data-z="1000">
        <section>
            <ul>
                <li>Concept of IAC is similar to programming scripts</li>
                <li>
                    <dl>
                        <dt>IAC uses higher-level or descriptive language to code:</dt>
                        <dd>
                            <ul>
                                <li>Versatile and adaptive provisioning</li>
                                <li>Deployment process(es)</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>IAC process closely resembles formal software design practices:</dt>
                        <dd>
                            <ul>
                                <li>Developers carefully control code versions</li>
                                <li>Test code iterations</li>
                                <li>Limit deployment until the software is proven and approved for production</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="example" data-scale="1" data-x="7200" data-y="2400" data-z="1000">
        <header>
            <h1>Example</h1>
        </header>
        <section>
            <p>Using Ansible (or Vagrant/Puppet/Chef/Salt...), an IT management and configuration tool, one could:</p>
            <ul>
                <li>Install MySQL server,</li>
                <li>Verify that MySQL is running properly,</li>
                <li>Create a user account and password,</li>
                <li>Set up a new database and remove unneeded databases</li>
            </ul>
            <p>-&gt; all through code.</p>
        </section>
    </div>
    <div class="slide step" data-scale="1" data-x="8400" data-y="2400" data-z="1000">
        <section>
            <p>Using code to provision and deploy servers and applications is particularly interesting to software developers:</p>
            <ul>
                <li>No dependency on system administrators to provision and manage the operations aspect of a DevOps environment</li>
                <li>IAC process can provision and deploy a new application for quality assurance or experimental deployment</li>
            </ul>
        </section>
    </div>
    <div class="slide step" data-scale="1" data-x="0" data-y="3200" data-z="1000">
        <section>
            <p>IAC also introduces potential disadvantages:</p>
            <ul>
                <li>IAC code development may require additional tools that could introduce learning curves and room for error</li>
                <li>Errors in IAC code can proliferate quickly through servers</li>
                <li>Monitoring/peer review for version control and comprehensive pre-release testing is mandatory</li>
                <li>
                    <dl>
                        <dt>If administrators can change server configurations without changing IAC code:</dt>
                        <dd>
                            <ul>
                                <li>Potential for configuration drift</li>
                                <li>Inconsistent configurations across data centers</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" data-scale="1" data-x="1200" data-y="3200" data-z="1000">
        <section>
            <p>It is therefor important to fully integrate IAC into:</p>
            <ul>
                <li>Systems administration</li>
                <li>IT operations</li>
                <li>DevOps processes</li>
                <li>With well-documented policies and procedures</li>
            </ul>
            <dl>
                <dt><strong>1, 2, automate</strong></dt>
                <dd>DevOps mantra meaning you should consider automating everything you envision to do more than 2 times in the foreseable future.</dd>
            </dl>
        </section>
    </div>
    <div class="slide step" id="iac-citrix" data-scale="1" data-x="2400" data-y="3200" data-z="1000">
        <header>
            <h1>IAC @ Citrix</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt>Jenkins node itself is build and deployed using Jenkins job</dt>
                        <dd>
                            <ul>
                                <li>Jenkins service and ELB as two cloud formations</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>Build slave images are created using Jenkins jobs</li>
                <li>
                    <dl>
                        <dt>Jenkins can run build jobs inside docker containers</dt>
                        <dd>
                            <ul>
                                <li>A generic docker build slave can be reused by different jobs</li>
                                <li>The docker images are build with Jenkins jobs</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="jenkins-deploys-jenkins" data-scale="1" data-x="3600" data-y="3200" data-z="1000">
        <header>
            <h1>Jenkins Deploys Jenkins</h1>
        </header>
        <section>
            <img align="center" alt="Jenkins deploys Jenkins" height="350px" src="img/JenkinsDeployJenkins.png" />
        </section>
    </div>
    <div class="slide step" id="docker-image-creation" data-scale="1" data-x="4800" data-y="3200" data-z="1000">
        <header>
            <h1>Docker Image Creation</h1>
        </header>
        <section>
            <img align="center" alt="Jenkins Slave Image Creation" height="500px" src="img/JenkinsSlaveImage.png" />
        </section>
    </div>
    <div class="slide step" id="configuration-as-code" data-scale="1" data-x="6000" data-y="3200" data-z="1000">
        <header>
            <h1>Configuration As Code</h1>
        </header>
        <section>
            <p>"Configuration as code" is a subset of the larger "infrastructure as code" concept:</p>
            <ul>
                <li>Adding of virtualization to the management of your configurations</li>
                <li>Not just managing what's on your systems but also the existence of the systems themselves</li>
            </ul>
        </section>
    </div>
    <div class="slide step" data-scale="1" data-x="7200" data-y="3200" data-z="1000">
        <section>
            <p>What does treating "configuration as code" mean in a pracital sense?</p>
            <ul>
                <li>Configuration often !is! code</li>
                <li>Apache config file(s) is/are basically a programming environment already</li>
            </ul>
            <p>What that means is using (good) practices common to the world of a programmer.</p>
        </section>
    </div>
    <div class="slide step" id="revision-control-and-deployment" data-scale="1" data-x="8400" data-y="3200" data-z="1000">
        <header>
            <h1>Revision Control And Deployment</h1>
        </header>
        <section>
            <ul>
                <li>As "code" you manage it in a version control system, then you compile and deploy it out to a target system</li>
                <li>As "config" you edit configs in place on a system</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="tests" data-scale="1" data-x="0" data-y="4000" data-z="1000">
        <header>
            <h1>Tests</h1>
        </header>
        <section>
            <ul>
                <li>Make it testable</li>
                <li>regression, unit, integration, load, security...</li>
                <li>Monitoring</li>
                <li>Development and test environments</li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="continuous-integration-continuous-deploy" data-scale="1" data-x="1200" data-y="4000" data-z="1000">
        <header>
            <h1>Continuous Integration/Continuous Deploy</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt>Follow a process</dt>
                        <dd>
                            <ul>
                                <li>Simple: design/code/test/deploy/maintain</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
                <li>
                    <dl>
                        <dt>This can include more complex steps:</dt>
                        <dd>
                            <ul>
                                <li>Modeling</li>
                                <li>Automated code validation</li>
                                <li>Defect tracking</li>
                                <li>Code reviews</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="simple-example-this-talk" data-scale="1" data-x="2400" data-y="4000" data-z="1000">
        <header>
            <h1>Simple Example: This Talk</h1>
        </header>
        <section>
            <ul>
                <li>Written in ReStructuredText</li>
                <li>Converted to HTML5</li>
                <li>Stored on Github</li>
                <li>Buildt using Travis CI</li>
            </ul>
            <p>-&gt; A commit/push to GitHub will trigger Travis that will build a new HTML file that is commited to Github which is then accessible via GitHub Pages.</p>
            <ul>
                <li>GitHub Repo: <a href="https://github.com/ConfigurationAsCode/ConfigurationAsCode.github.io">github.com</a></li>
                <li>Travis CI: <a href="https://travis-ci.org/ConfigurationAsCode/ConfigurationAsCode.github.io">travis-ci.org</a></li>
                <li>GitHub Pages: <a href="http://configurationascode.github.io/">github.io</a></li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="github-repo" data-scale="1" data-x="3600" data-y="4000" data-z="1000">
        <header>
            <h1>GitHub Repo</h1>
        </header>
        <section>
            <img align="center" alt="GitHub Repo View" height="500px" src="img/Talk-Github.png" />
        </section>
    </div>
    <div class="slide highlight step" id="travis-ci-configuration" data-scale="1" data-x="4800" data-y="4000" data-z="1000">
        <header>
            <h1>Travis CI configuration</h1>
        </header>
        <section>
            <pre><code class="yaml"><span class="c1"># .travis.yml:</span>
<span class="l-Scalar-Plain">language</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">python</span>
<span class="l-Scalar-Plain">python</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="s">"3.5"</span>
<span class="l-Scalar-Plain">install</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pip install -r requirements.txt</span>
<span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash make.sh</span>
<span class="l-Scalar-Plain">after_success</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">bash deploy.sh</span>
<span class="l-Scalar-Plain">env</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">global</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">secure</span><span class="p-Indicator">:</span> <span class="s">"HkI0NJy4XDHC/7HMhjkLUW/dJYOi8irePyPHRRu2yQXbx2n7+zGjXFRsfQLjgEtorOyVJMhmW/4wKG62x</span></code></pre>
            <pre><code class="bash"><span class="c1"># requirements.txt:
</span><span class="nv">rst2html5</span><span class="o">==</span>1.4
rst2html5slides</code></pre>
        </section>
    </div>
    <div class="slide highlight step" id="create-index-html" data-scale="1" data-x="6000" data-y="4000" data-z="1000">
        <header>
            <h1>Create index.html</h1>
        </header>
        <section>
            <pre><code class="bash"><span class="c1"># make.sh:
#!/bin/bash
</span>
. ./create-sources.sh

cat *.rst &gt;&gt;slides.rst

rst2html5slides --traceback --strict --tab-width<span class="o">=</span>4<span class="se">\
</span>            --template templates/jmpress.html <span class="se">\
</span>                        slides.rst index.html

rm -f slides.rst</code></pre>
            <pre><code class="bash"><span class="c1"># create-sources.sh:
#!/bin/bash
</span>
pygmentize <span class="o">()</span> <span class="o">{</span>
    <span class="nv">FILE</span><span class="o">=</span><span class="nv">$1</span>
    <span class="nv">CODE</span><span class="o">=</span><span class="nv">$2</span>
    <span class="nb">echo</span> <span class="s2">".. code:: </span><span class="si">${</span><span class="nv">CODE</span><span class="si">}</span><span class="s2">"</span> &gt;src/<span class="si">${</span><span class="nv">FILE</span><span class="si">}</span>
    <span class="nb">echo</span> <span class="s2">"    "</span> &gt;&gt;src/<span class="si">${</span><span class="nv">FILE</span><span class="si">}</span>
    <span class="nb">echo</span> <span class="s2">"    # </span><span class="si">${</span><span class="nv">FILE</span><span class="si">}</span><span class="s2">:"</span> &gt;&gt;src/<span class="si">${</span><span class="nv">FILE</span><span class="si">}</span>
    <span class="k">while</span> <span class="nv">IFS</span><span class="o">=</span><span class="s1">''</span> <span class="nb">read</span> -r line<span class="p">;</span> <span class="k">do</span>
        <span class="nb">printf</span> <span class="s2">"    %.100s\n"</span> <span class="s2">"</span><span class="nv">$line</span><span class="s2">"</span>&gt;&gt;src/<span class="si">${</span><span class="nv">FILE</span><span class="si">}</span>
    <span class="k">done</span> &lt; <span class="si">${</span><span class="nv">FILE</span><span class="si">}</span>
<span class="o">}</span>

pygmentize .travis.yml yaml
pygmentize make.sh bash
pygmentize create-sources.sh bash
pygmentize deploy.sh bash
pygmentize requirements.txt bash</code></pre>
        </section>
    </div>
    <div class="slide highlight step" id="commit-index-html-to-github" data-scale="1" data-x="7200" data-y="4000" data-z="1000">
        <header>
            <h1>Commit index.html To GitHub</h1>
        </header>
        <section>
            <pre><code class="bash"><span class="c1"># deploy.sh:
#!/bin/bash
</span>
<span class="nb">set</span> -o errexit -o nounset

<span class="nv">rev</span><span class="o">=</span><span class="k">$(</span>git rev-parse --short HEAD<span class="k">)</span>

git init
git config user.name <span class="s2">"Thomas William"</span>
git config user.email <span class="s2">"thomas.william@citrix.com"</span>

git remote add upstream <span class="se">\
</span>    <span class="s2">"https://</span><span class="nv">$GH_TOKEN</span><span class="s2">@github.com/ConfigurationAsCode/ConfigurationAsCode.github.io.git"</span>
git fetch upstream
git reset upstream/master

<span class="nb">echo</span> <span class="s2">"configurationascode.github.io"</span> &gt; CNAME

touch .

git add -A .
git commit -m <span class="s2">"rebuild pages at </span><span class="si">${</span><span class="nv">rev</span><span class="si">}</span><span class="s2">"</span>
git push -q upstream HEAD:master</code></pre>
        </section>
    </div>
    <div class="slide step" id="travis-ci" data-scale="1" data-x="8400" data-y="4000" data-z="1000">
        <header>
            <h1>Travis CI</h1>
        </header>
        <section>
            <img align="center" alt="Travis CI View" height="500px" src="img/Talk-Travis.png" />
        </section>
    </div>
    <div class="slide step" id="cas-citrix-1-2" data-scale="1" data-x="0" data-y="4800" data-z="1000">
        <header>
            <h1>CAS @ Citrix 1/2</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt>The build plans to create the docker images are create by jenkins jobs</dt>
                        <dd>
                            <ul>
                                <li>Dependency graphs are built by parsing Dockerfiles</li>
                                <li>Plans trigger each other in right order</li>
                                <li>Change to base layer invokes rebuilt of upper layers</li>
                                <li>Configuration is completely stored in git repository</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="cas-citrix-2-2" data-scale="1" data-x="1200" data-y="4800" data-z="1000">
        <header>
            <h1>CAS @ Citrix 2/2</h1>
        </header>
        <section>
            <ul>
                <li>
                    <dl>
                        <dt>To create a new docker image in Artifactory/Jenkins:</dt>
                        <dd>
                            <ul>
                                <li>commit/push Dockerfile to git repository</li>
                                <li><em>CreateAllSlaveImages</em> plan gets triggered by code change</li>
                                <li><em>CreateAllSlaveImages</em> parses Dockerfile and triggers <em>CreateSlaveContainerProject</em> with Parameters</li>
                                <li><em>CreateSlaveContainerProject</em> creates a Jenkins plan for new Dockerfile</li>
                            </ul>
                        </dd>
                    </dl>
                </li>
            </ul>
        </section>
    </div>
    <div class="slide step" id="one-plan-for-each-dockerfile" data-scale="1" data-x="2400" data-y="4800" data-z="1000">
        <header>
            <h1>One Plan For Each Dockerfile</h1>
        </header>
        <section>
            <img align="center" alt="Jenins Plan Creation Plan" height="500px" src="img/JeninsPlanCreation.png" />
        </section>
    </div>
    <div class="slide step" id="live-demo-of-jenkins" data-scale="1" data-x="3600" data-y="4800" data-z="1000">
        <header>
            <h1>Live Demo Of Jenkins</h1>
        </header>
        <section>
            <ul>
                <li>The configuration of a plan changes with the sourcecode</li>
                <li>Adding endpoints (capabilities) to your code, you will need to change your build as well</li>
                <li>If you need to apply a hotfix for an old version, your changed build-plan will not work with the old source code base</li>
                <li>Your build machines may have changed (newer compiler versions etc.)</li>
            </ul>
            <p>-&gt; Solution is to save build plan (and requirements) alongside with the source code: <em>Jenkinsfile</em></p>
        </section>
    </div>
    <div class="slide step" id="summary" data-scale="1" data-x="4800" data-y="4800" data-z="1000">
        <header>
            <h1>Summary</h1>
        </header>
        <section>
            <p>Moving build system into the cloud enables us to:</p>
            <ul>
                <li>Scale up build machines according to (current) demand</li>
                <li>Scale down on systems/apps we need to support (tech debt)</li>
                <li>Massively increase automation using AWS</li>
                <li>Provide more uniform environment across, dev, test, staging and production</li>
            </ul>
        </section>
    </div>
    <div class="overview step" data-scale="8" data-x="4000" data-y="2400" id="overview" data-z="1000">
        <section>text of overview slide not shown</section>
    </div>
</div>

<div id="progressbar"><div></div></div>
</body>
</html>
